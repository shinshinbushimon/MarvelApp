データの格納：完了
データの取得法：
    mongodbのlocalhost: 27017ポートに接続してキャラクタを取得してレンダリングするページごとに表示する形式に
検索機能：
    nameがchangeされるたびに、少し時間をおいてname属性が部分一致または全体一致のキャラクターをmongodbから取得して画面に表示する

関連コンテンツの取得：
    Characterのリスト画面を押下すると関連のコンテンツを含んだ詳細画面が表示される。
    関連コンテンツはAPIのエンドポイントと紐づいておりこれを押下したとたんサーバ側のapp.getで登録している任意のマウントポイントにフロントサイドからアクセスし
    server.jsは、APIのurlを生成し結果を取得してレスポンスとして返す。フロントエンドはコンテンツ関連画面として関連コンテンツの情報が記載された画面をレンダリングする

testpoint1:
    MongoDBへ値を取得してデータをレンダリングできていることを確認
    issues:
        リスト画面が常に下部に表示され、詳細画面をレンダリングしても残ったままになっている。
        approach:
            routerの階層がおかしいので検索機能を追加してpage単位にして追加 ☞ ✖
            最上位階層にリストコンポーネントを直接記載していたので取り除き、Routesを修正した ☞ 〇

testpoint2:
    検索機能が実装できていることを確認　☞　上記の検索機能を参照

testpoint3:
    関連コンテンツの取得を確認　☞　dbから取得したapiデータを基にエンドポイントとユーザ名等を生成してdataFetchすること


testpoint2案:
    検索で使用する専用のデータ構造を保持すること ☞ Recoilで制御
    このデータ構造を検知して検索結果コンポーネント表示を切り替えること
    検索記入欄の記載が亡くなるとコンポーネントの表示を切ること
    inputFieldのonChangeで変化を探知し、検索関数を実行
    検索関数：
        少し待つ
        部分一致するデータをdbから取得し、atomのrecoilStateを使用して保持データ配列を更新する
    
    設計案：
        データ構造：配列
        データ構造の管理方法：recoilAtom
        検索欄の値はatomで管理して、onChangeで更新
        検索欄の値をuseEffectで監視したcustomHooksを作成する。
        customHooks:
            useEffectでrecoilAtomの検索欄の値が変更されるとMongoドライバにnameの部分一致のクエリを指定して検索で使用するデータ構造を更新する。
        
        customHooksでは更新したデータ構造と更新関数のセットを返し、検索結果の有無をCharacterDefaultで評価すること

        issues:
            検索欄が空欄に変わったときにすべてのデータを取得しに行ってるっぽい
            検索の要素は分かるようにスタイルを変えないと後、検索したけど結果がない状態でちゃんと表示されるようにしないと
            ☞　〇

            検索時に表示される、未キャッシュの値をmongoから表示させないといけない。キャッシュデータしか見に行っていないのでここでエラーになっている。
            新たに、taretCharacterIdというatomを追加して監視対象とする
            targetCharacterIdをセットして、変更を監視detail画面がレンダリング対象になったときにidを変更する。
            targetCharacterIdによってuseEffectを実行すること
            親コンポネントでは、カスタムフックを宣言
            searchedDataという名前で管理対象とする、キャッシュから取得しようがデータベースから取得しようが同じ　

        nextaction:
            comicsなどの関連コンテンツのAPI取得
            ユーザ名とパスワードでの関係データベース管理の追加
            お気に入り機能とお気に入りページの追加
            footerにコピーライトの記載


character詳細画面から、各関連データ取得の状態整理
☞
characterDetailの情報：
    comic等のエンドポイント、offset、などデータ全般

customHooksで達成させたいこと：

改修対象：
    20件しか取れていないスクロール処理ですべて取得できるように
    データの取得途中なのか、データがこれ以上ないのかそもそもないのかわからない
    文言を変える必要がある
    comic以外も実装できること
    関係データベースの使用とお気に入り機能
    型定義（インターフェース）の構造化

nextAction:
    scrollが無限に取れてしまっているので、ここを改善、また、limit=20以降のデータも取れるように
    storiesが変
    詳細画面を作る
　　　　　







{
  "code": 200,
  "status": "Ok",
  "copyright": "© 2024 MARVEL",
  "attributionText": "Data provided by Marvel. © 2024 MARVEL",
  "attributionHTML": "<a href=\"http://marvel.com\">Data provided by Marvel. © 2024 MARVEL</a>",
  "etag": "1e7ee3dd5f6c7812ffb6f861384f4232bd52cbbd",
  "data": {
    "offset": 0,
    "limit": 20,
    "total": 12,
    "count": 12,
    "results": [
      {
        "id": 22506,
        "digitalId": 10949,
        "title": "Avengers: The Initiative (2007) #19",
        "issueNumber": 19,
        "variantDescription": "",
        "description": "",
        "modified": "2015-10-27T16:38:23-0400",
        "isbn": "",
        "upc": "5960606084-01911",
        "diamondCode": "SEP082362",
        "ean": "",
        "issn": "",
        "format": "Comic",
        "pageCount": 32,
        "textObjects": [
          {
            "type": "issue_preview_text",
            "language": "en-us",
            "text": "Join 3-D MAN, CLOUD 9, KOMODO, HARDBALL, and heroes around America in the battle that will decide the fate of the planet and the future of the Initiative program. Will the Kill Krew Army win the day?"
          },
          {
            "type": "issue_solicit_text",
            "language": "en-us",
            "text": "SECRET INVASION Tie-In!\r<br>\"V-S DAY\"\r<br>It's been leading to this since the Hank Pym Skrull first came up with the idea for a Fifty State Initiative.  This is the final assault in the Secret Invasion, a nation-wide plan that will test the limits of 3-D MAN'S superhuman militia, THE KILL KREW ARMY! Join 3-D MAN, CLOUD 9, KOMODO, HARDBALL, and heroes around America in the battle that will decide the fate of the planet and the future of the Initiative program.  Win or lose, there's no turning back.  After today, everything changes.\r<br>Rated T+ ...$2.99\r<br>"
          }
        ],
        "resourceURI": "http://gateway.marvel.com/v1/public/comics/22506",
        "urls": [
          {
            "type": "detail",
            "url": "http://marvel.com/comics/issue/22506/avengers_the_initiative_2007_19?utm_campaign=apiRef&utm_source=576628c5c4ac1bcfea7860946c052ddf"
          },
          {
            "type": "purchase",
            "url": "http://comicstore.marvel.com/Avengers-The-Initiative-19/digital-comic/10949?utm_campaign=apiRef&utm_source=576628c5c4ac1bcfea7860946c052ddf"
          },
          {
            "type": "reader",
            "url": "http://marvel.com/digitalcomics/view.htm?iid=10949&utm_campaign=apiRef&utm_source=576628c5c4ac1bcfea7860946c052ddf"
          },
          {
            "type": "inAppLink",
            "url": "https://applink.marvel.com/issue/10949?utm_campaign=apiRef&utm_source=576628c5c4ac1bcfea7860946c052ddf"
          }
        ],
        "series": {
          "resourceURI": "http://gateway.marvel.com/v1/public/series/1945",
          "name": "Avengers: The Initiative (2007 - 2010)"
        },
        "variants": [],
        "collections": [],
        "collectedIssues": [],
        "dates": [
          {
            "type": "onsaleDate",
            "date": "2008-12-17T00:00:00-0500"
          },
          {
            "type": "focDate",
            "date": "2008-11-27T00:00:00-0500"
          },
          {
            "type": "unlimitedDate",
            "date": "2010-02-23T00:00:00-0500"
          },
          {
            "type": "digitalPurchaseDate",
            "date": "2011-08-09T00:00:00-0400"
          }
        ],
        "prices": [
          {
            "type": "printPrice",
            "price": 2.99
          },
          {
            "type": "digitalPurchasePrice",
            "price": 1.99
          }
        ],
        "thumbnail": {
          "path": "http://i.annihil.us/u/prod/marvel/i/mg/d/03/58dd080719806",
          "extension": "jpg"
        },
        "images": [
          {
            "path": "http://i.annihil.us/u/prod/marvel/i/mg/d/03/58dd080719806",
            "extension": "jpg"
          }
        ],
        "creators": {
          "available": 9,
          "collectionURI": "http://gateway.marvel.com/v1/public/comics/22506/creators",
          "items": [
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/creators/2133",
              "name": "Tom Brevoort",
              "role": "editor"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/creators/452",
              "name": "Virtual Calligr",
              "role": "letterer"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/creators/12581",
              "name": "Vc Chris Eliopoulos",
              "role": "letterer"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/creators/1400",
              "name": "Bong Dazo",
              "role": "penciller"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/creators/11765",
              "name": "Christos Gage",
              "role": "writer"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/creators/12983",
              "name": "Dan Slott",
              "role": "writer"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/creators/8706",
              "name": "Jay David Ramos",
              "role": "colorist"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/creators/500",
              "name": "Christopher Sotomayor",
              "role": "colorist"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/creators/8584",
              "name": "Harvey Tolibao",
              "role": "inker"
            }
          ],
          "returned": 9
        },
        "characters": {
          "available": 9,
          "collectionURI": "http://gateway.marvel.com/v1/public/comics/22506/characters",
          "items": [
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/characters/1011334",
              "name": "3-D Man"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/characters/1010802",
              "name": "Ant-Man (Eric O'Grady)"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/characters/1009165",
              "name": "Avengers"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/characters/1009284",
              "name": "Dum Dum Dugan"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/characters/1011490",
              "name": "Hank Pym"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/characters/1010821",
              "name": "Hardball"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/characters/1009376",
              "name": "Jocasta"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/characters/1010818",
              "name": "Komodo (Melati Kusuma)"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/characters/1009737",
              "name": "Yellowjacket (Hank Pym)"
            }
          ],
          "returned": 9
        },
        "stories": {
          "available": 2,
          "collectionURI": "http://gateway.marvel.com/v1/public/comics/22506/stories",
          "items": [
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/stories/49888",
              "name": "AVENGERS: THE INITIATIVE (2007) #19",
              "type": "cover"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/stories/49889",
              "name": "Avengers: The Initiative (2007) #19 - Int",
              "type": "interiorStory"
            }
          ],
          "returned": 2
        },
        "events": {
          "available": 1,
          "collectionURI": "http://gateway.marvel.com/v1/public/comics/22506/events",
          "items": [
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/events/269",
              "name": "Secret Invasion"
            }
          ],
          "returned": 1
        }
      },
      {
        "id": 22300,
        "digitalId": 0,
        "title": "Avengers: The Initiative (2007) #18 (ZOMBIE VARIANT)",
        "issueNumber": 18,
        "variantDescription": "ZOMBIE VARIANT",
        "description": "",
        "modified": "-0001-11-30T00:00:00-0500",
        "isbn": "",
        "upc": "5960606084-01821",
        "diamondCode": "AUG082378",
        "ean": "",
        "issn": "",
        "format": "Comic",
        "pageCount": 32,
        "textObjects": [
          {
            "type": "issue_solicit_text",
            "language": "en-us",
            "text": "SECRET INVASION TIE-IN!\r<br>THE EXPLOSIVE FINALE STARTS HERE!\r<br>Now that the KILL KREW knows Skrullowjacket's master plan, can they stop the TRUE purpose of the Fifty State Initiative? Plus:  It's THOR GIRL vs. ULTRA GIRL!  One is more than she appears to be... and the other's a Skrull. And, after fourteen issues, are we REALLY going to unmask MUTANT ZERO?!\r<br>Rated T+ ...$2.99\r<br>"
          }
        ],
        "resourceURI": "http://gateway.marvel.com/v1/public/comics/22300",
        "urls": [
          {
            "type": "detail",
            "url": "http://marvel.com/comics/issue/22300/avengers_the_initiative_2007_18_zombie_variant/zombie_variant?utm_campaign=apiRef&utm_source=576628c5c4ac1bcfea7860946c052ddf"
          }
        ],
        "series": {
          "resourceURI": "http://gateway.marvel.com/v1/public/series/1945",
          "name": "Avengers: The Initiative (2007 - 2010)"
        },
        "variants": [
          {
            "resourceURI": "http://gateway.marvel.com/v1/public/comics/22299",
            "name": "Avengers: The Initiative (2007) #18"
          }
        ],
        "collections": [],
        "collectedIssues": [],
        "dates": [
          {
            "type": "onsaleDate",
            "date": "2008-10-29T00:00:00-0400"
          },
          {
            "type": "focDate",
            "date": "2008-10-09T00:00:00-0400"
          }
        ],
        "prices": [
          {
            "type": "printPrice",
            "price": 2.99
          }
        ],
        "thumbnail": {
          "path": "http://i.annihil.us/u/prod/marvel/i/mg/1/10/4e94a23255996",
          "extension": "jpg"
        },
        "images": [
          {
            "path": "http://i.annihil.us/u/prod/marvel/i/mg/1/10/4e94a23255996",
            "extension": "jpg"
          },
          {
            "path": "http://i.annihil.us/u/prod/marvel/i/mg/b/20/4bb63aa561aa0",
            "extension": "jpg"
          }
        ],
        "creators": {
          "available": 8,
          "collectionURI": "http://gateway.marvel.com/v1/public/comics/22300/creators",
          "items": [
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/creators/2133",
              "name": "Tom Brevoort",
              "role": "editor"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/creators/5251",
              "name": "Vc Joe Caramagna",
              "role": "letterer"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/creators/1054",
              "name": "Juan Doe",
              "role": "penciller (cover)"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/creators/11765",
              "name": "Christos Gage",
              "role": "writer"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/creators/12983",
              "name": "Dan Slott",
              "role": "writer"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/creators/548",
              "name": "Andrew Hennessy",
              "role": "inker"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/creators/4981",
              "name": "Steve Kurth",
              "role": "penciller"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/creators/1405",
              "name": "Matt Milla",
              "role": "colorist"
            }
          ],
          "returned": 8
        },
        "characters": {
          "available": 9,
          "collectionURI": "http://gateway.marvel.com/v1/public/comics/22300/characters",
          "items": [
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/characters/1011334",
              "name": "3-D Man"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/characters/1010802",
              "name": "Ant-Man (Eric O'Grady)"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/characters/1010823",
              "name": "Cloud 9"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/characters/1009284",
              "name": "Dum Dum Dugan"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/characters/1010702",
              "name": "Gravity"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/characters/1011490",
              "name": "Hank Pym"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/characters/1010818",
              "name": "Komodo (Melati Kusuma)"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/characters/1009599",
              "name": "Skrulls"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/characters/1011057",
              "name": "Slapstick"
            }
          ],
          "returned": 9
        },
        "stories": {
          "available": 2,
          "collectionURI": "http://gateway.marvel.com/v1/public/comics/22300/stories",
          "items": [
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/stories/49105",
              "name": "Avengers: The Initiative (2007) #18, Zombie Variant",
              "type": "cover"
            },
            {
              "resourceURI": "http://gateway.marvel.com/v1/public/stories/49106",
              "name": "Avengers: The Initiative (2007) #18, Zombie Variant - Int",
              "type": "interiorStory"
            }
          ],
          "returned": 2
        },
        "events": {
          "available": 0,
          "collectionURI": "http://gateway.marvel.com/v1/public/comics/22300/events",
          "items": [],
          "returned": 0
        }
      },